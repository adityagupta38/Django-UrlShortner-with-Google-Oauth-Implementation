{% extends 'base.html' %}
{% load socialaccount %}

{% block title %} Profile{% endblock %}
{% load widget_tweaks %}

{% block body %}

    {% if user.is_authenticated %}
    <h2 class="aler alert-info text-center">
    <div class="container">
        <div class="row">
            <div class="col-sm-10">
                Welcome, You are logged in as {{ user.username }}  </div>
            <div class="col-sm-2 text-end">
        <a  href="/logout"><button class="btn btn-danger w-75">Logout</button></a>
            </div>
        </div>
    </div></h2>
        <br>

    <div class="text-center"><a href="/"><button class="btn btn-success w-25">Refresh</button></a></div>
    <div class="text-center mt-5">
    <form method="post">
        {% csrf_token %}
        {% render_field form.link class="w-75" placeholder="Enter link"%}<br><br>
        <button class="btn btn-primary w-25" type="submit">Short!</button>
    </form>
    </div><br>


     {% if urls_list %}
        <table class="table table-hover table-responsive table-dark">
        <thead>
        <tr><th colspan="4"><h4 class=" alert alert-info text-center" >Short Urls</h4></th></tr>
        <tr>
            <th>Short Url</th>
            <th>Last Clicked</th>
            <th>Click Count</th>

            <th style="text-align: center">Click To Perform Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for url in urls_list %}
            <tr>
                <td><a href="/redirect/{{ url.uuid }}">https://{{ url.uuid }}</a></td>
                <td>{{ url.last_clicked }}</td>
                <td>{{ url.click_count}}</td>
                <td><a class="button-block" href="/delete/{{ url.uuid }}">Delete</a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    {% else %}
        <div id="center">
        <h2 class="alert alert-dark" style="margin-top: 20%; text-align: center; font-family: 'Helvetica Neue, Helvetica, Arial, sans-serif'">You did not have any short Urls Yet!</h2>
        </div>
    {% endif%}

    {% else %}
        <div class="text-center pt-5 mt-5">
        <a href="{% provider_login_url 'google' %}"><button class="btn btn-primary w-25">Login With Google</button></a>
        </div>
{% endif %}

{% endblock %}